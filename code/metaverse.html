<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="metaverse.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/1.0.11/pako.min.js"></script>
    <script type="importmap">
        {
            "imports": {
                "three": "/node_modules/three/build/three.module.js",
                "stats.js": "/node_modules/stats.js/src/Stats.js",
                "cannon-es": "/node_modules/cannon-es/dist/cannon-es.js",
                "oimo": "/node_modules/oimo/build/oimo.module.js"
            }
        }
    </script>
    <script type="module" src="event.js"></script>
    <script type="module" src="record.js"></script>
    <title>GiO</title>
    <style>
        /* Your existing CSS styles */
        .hidden {
            display: none;
        }
    </style>

</head>
<body>

    <div id="positionLabel" style="position: absolute; top: 10px; right: 10px; color: white; font-family: Arial; font-size: 16px; z-index: 99999;"></div>
    <div id = "tutorial">
        <div class="map_intro">
            <div class="tori"></div>
            <div class="tori_text_box">
                <div class="tori_tag npc_name">토리</div>
                <div class="tori_text">안녕! GiO 세계에 온걸 환영해!</div>
                <div class="tori_next next_btn"></div>
            </div>
            <div class="namebox">
                <div id="name_intro">이름을 입력하세요.</div>
                <input id="name_input" type="text" placeholder="입력한 이름으로 표시됩니다. (최대7자)">
                <button>확인</button>
            </div>
        </div>
    </div>
    <div class='tori_help'>
        <p>지도에 표시되어 있는<br>학교를 클릭해봐! 버스를 타고<br>학교로 이동할 수 있어!</p>
        <div class="next_btn"></div>
    </div>
    <div id="BtnMaps">
        <button id="buttonNo"></button>
        <h1></h1>
        <div>    
            <button id="buttonScene0" style="background-image: url(./data/mappage/school.png);">
                <!-- <div class="SceneTag">학교</div> -->
            </button>
            <button id="buttonScene1" style="background-image: url(./data/mappage/town.png);">
                <!-- <div class="SceneTag">마을회관</div> -->
            </button>
            <button id="buttonScene2" style="background-image: url(./data/mappage/library.png);">
                <!-- <div class="SceneTag">도서관</div> -->
            </button>
            <button id="buttonScene3" style="background-image: url(./data/mappage/park.png);">
                <!-- <div class="SceneTag">공원</div> -->
            </button>
        </div>
        <div id="shadow"></div>
    </div>
    <div id="webgl-container"></div>

            <!-- 모달 창 -->
            <div id="myModal" class="modal">
                <!-- 모달 콘텐츠 -->
                <div class="Speech1 textModal">
                    <span class="npc_name"></span>
                    <span class="close" id="close1" style="display: none;">&times;</span>
                    <p>거기 너! 나랑 공놀이 하지 않을래?</p>
                    <div class="choose" style="display: flex;">
                    <button class="GameBtn" id="Game" data-path="">좋아!</button>
                    <button class="GameBtn" onclick="document.getElementById('close1').click()">다음에 하자</button>
                    <button id="option1" style="display: none;">점수확인</button>
                    </div>
                    <!-- <button id="option2">점수기입</button> -->
                    <button id="recordButton" style="display: none;">녹음 시작</button>
                </div>
            </div>    
            <!-- 유니티 게임 모달 -->
            <div id="gameModal" class="modal textModal">
                <div class="modal-content" id="game-content">
                    <span class="close" id="closeGameModal">&times;</span>
                    <iframe id="unityGame" src="" style="width:100%; height:100%;" frameborder="0"></iframe>
                </div>
            </div>

            <div id="thiscasher" class="casher textModal"> 
                <div class="Speech1">
                    <span class="npc_name"></span>
                    <p id="speechText">이것은 우리의 대화에 들어가는 것을 테스트 하는 것이에요.</p>
                    <button id="next" class="next_btn"></button>
                    <span class="close" id="casher_close" style="display: none;">&times;</span>
                    <div id="buttonGroup" class="choose" style="display: none;">
                        <div id = recording>정답을 소리내어 말해보세요.</div>
                        <button id ="select1">이렇게 할까?</button>
                        <button id ="select2">저렇게 할까?</button>
                        <button id ="select3">요렇게 할까?</button>
                        <button id="recordButton" style="display: none;">녹음 시작</button>
                    </div>
                    <div id="'helper" style="display: none;">
                        <div id="helper_text"></div>
                        <img src="/code/data/maru.png" alt="" id="helper_img">
                    </div>
                </div>
            </div>
            <div id="loadingPage">
                <!-- <div id="loadback">
                    <h1>Loading...</h1>
                    <div class="spinner"></div>
                </div> -->
                <img src="./data/loginImage/loadimg.png" alt="" id="loadimg">
            </div>
            
            <div id="loginModal" class="modal textModal">
                <div class="modal-content" id="loginContent">
                    <img src="./data/loginImage/logo.png" alt="Logo" id="login-logo">
                    <h2 id="main-login">로그인</h2>
                    <h2 onclick="switchToSignup()">회원가입</h2>
                    <h2>교육가이드</h2>
                    <h2>공지사항</h2>
                    
                </form>
                <span class="close" style="display: none;">&times;</span>
                <div id="intro">
                    <h3 style="font-size: 32px;">Growing Intercommunication Odyssey</h3>
                    <h4 style="font-size: 18px;">고기능 자폐 스펙트럼 아동들의 사회성 교육과 성장을 위한 사이트, GiO</h4>
                    <h4 style="font-size: 18px;">교육자들을 위한 보조와 아이들의 치료와 성장을 위해 GiO가 함께합니다.</h4>
                </div>
            </div>
                <div id="loginpage">
                    <h1 style="color: #373737;">로그인</h1>
                    <form id="loginForm">
                        <div style="display: flex; justify-content: center;">
                            <div id="loginBtns">
                                <input type="text" placeholder="아이디" name="id" required>
                                <br>
                                <input type="password" placeholder="비밀번호" name="password" required>
                            </div>
                            <button type="submit" id="loginBtn" style="color: #373737; font-weight: bold; font-size: 18px;">로그인</button>
                        </div>
                    </br>
                        <!-- <button type="button" id = "regBtn"onclick="switchToSignup()">회원가입하기</button> -->
                        <button type = "button" id="findBtn"> ID/PW 찾기</button>
                    </form>
                </div>
                <div id="signupPage">
                    <form id="signupForm">
                        <h2 style="color: #373737;">회원가입</h2>
                        <div style="display: flex;">
                        <div>
                        <h4>이름</h4>
                        <input type="text" placeholder="예시) 홍길동" style="width: 140px;">
                        </div>
                        <div style="margin-left: 35px;">
                            <h4>성별</h4>
                            <div id="gender">

                                <input type="radio" id="male" name="gender" value="male">
                                <label for="male" class="genderbutton">남</label>
                                
                                <input type="radio" id="female" name="gender" value="female">
                                <label for="female" class="genderbutton">여</label>
                            </div>
                        </div>
                        </div>
                        <div>
                            <h4>생년월일</h4>
                            <input type="text" placeholder="년(4자)" style="width: 130px;">
                            <input type="text" placeholder="월" style="width: 77px;">
                            <input type="text" placeholder="일" style="width: 77px;">
                        </div>
                        <div>
                            <h4>아이디</h4>
                            <input type="text" placeholder="6~12자의 영문, 숫자만 사용가능합니다." name="id" required style="width: 333px;">
                        </div>
                        <div>
                            <h4>비밀번호</h4>
                            <input type="password" placeholder="6~12자의 영문, 숫자만 사용가능합니다." name="password" required style="width: 333px;">
                            <input type="password" placeholder="비밀번호를 다시 입력해주세요." name="confirmPassword" required style="width: 333px;">
                        </div>
                        <div>
                            <h4>이메일</h4>
                            <input type="email" placeholder="E-mail" style="width: 333px;">
                        </div>
                        <button type="submit" style="width: 352px; font-weight: bold; font-size: 18px;">가입하기</button>
                        <!-- <button type="button" onclick="switchToLogin()">로그인</button> -->
                    </form>
                    <div id="signupComplete">
                        <h1>회원가입이 완료되었습니다.</h1>
                        <button onclick="switchToLogin()">로그인하기</button>
                    </div>
                </div>
            </div>
            <div id="speechBubble" style="display: none; position: absolute; padding: 10px; background: white; border: 1px solid black; border-radius: 5px;">
                Hello, I'm an NPC!
            </div>









            

            

            <button id="openModal" onclick="openModal()" style="display: none;">마이페이지</button>
            
            <div id="pageModal" class="mypagemodal-bg"> 



                <!--메인창-->
                <div id="mypageMain">
                    <div class="index">
                        <img src="data/mypageimage/mypageim/bookmark_green.png" class="indexDefault index1 indexSelect">
                        <img src="data/mypageimage/mypageim/bookmark_pink.png" class="indexDefault index2 indexMove" style="z-index: -1;" onclick="showStickerTab()">
                        <img src="data/mypageimage/mypageim/bookmark_blue.png" class="indexDefault index3 indexMove" style="z-index: -2;" onclick="showDataTab()">
                        <img src="data/mypageimage/mypageim/bookmark_yellow.png" class="indexDefault index4 indexMove" style="z-index: -3;" onclick="showSettingTab()">
                    </div>
                    <img src="data/mypageimage/mypageim/close_btn.png" class="closeIndex indexDefault indexMove" onclick="closeModal()">
                    <div id="note">
                        <div id="profileBox">
                            <img id="profileImg" src="data/mypageimage/mypageim/profile_img.png">
                            <div id="playerName">
                                <p>개척자</p>
                            </div>

                            <div id="profileBackground">
                                <div id="profileInfo">
                                    <div id="birthday" class="backgroundDefault">
                                        <div class="classification">
                                            <img id="B-icon" src="data/mypageimage/mypageim/birth_icon.png" width="25em" height="26em">
                                            <p>생일</p>
                                        </div>
                                        <div class="info">
                                            <p>2015.05.30</p>
                                        </div>
                                    </div>
                                    <div id="joindate" class="backgroundDefault">
                                        <div class="classification">
                                            <img id="B-icon" src="data/mypageimage/mypageim/enter_icon.png" width="25em" height="24em">
                                            <p>가입일</p>
                                        </div>
                                        <div class="info">
                                            <p>2024.07.01</p>
                                        </div>
                                    </div>
                                    <div id="visit" class="backgroundDefault">
                                        <div class="classification">
                                            <img id="B-icon" src="data/mypageimage/mypageim/visit_icon.png" width="25em" height="24em">
                                            <p>방문</p>
                                        </div>
                                        <div class="info">
                                            <p>37회</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div id="buttonBox">
                            <div id="stickerbook" class="selectOption" onclick="showStickerTab()">
                                <img src="data/mypageimage/mypageim/stickerbook.png">
                            </div>
                            <div id="system" class="selectOption" onclick="showSettingTab()">
                                <img src="data/mypageimage/mypageim/setting.png">
                            </div>
                            <div id="data" class="selectOption" onclick="showDataTab()">
                                <img src="data/mypageimage/mypageim/data.png">
                            </div>
                            <div id="buttonOption" class="selectOption">
                                <div id="twoButton">
                                    <div id="inputCode" class="buttonSetting">
                                        <img id="S-icon" src="data/mypageimage/mypageim/code_icon.png" width="24em" height="20em">
                                        <p class="fontSetting">코드 입력</p>
                                    </div>
                                    <div id="logout" class="buttonSetting">
                                        <img id="S-icon" src="data/mypageimage/mypageim/logout_icon.png" width="23em" height="25em">
                                        <p class="fontSetting">로그아웃</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <img src="data/mypageimage/mypageim/pencil.png" id="pencil">
                </div>



                <!--스티커북창-->
                <div id="StickerTab" class="tabcontent">
                    <div class="index">
                        <img src="data/mypageimage/mypageim/bookmark_green.png" class="indexDefault index1 indexMove" onclick="openModal()">
                        <img src="data/mypageimage/mypageim/bookmark_pink.png" class="indexDefault index2 indexSelect" style="z-index: -1;">
                        <img src="data/mypageimage/mypageim/bookmark_blue.png" class="indexDefault index3 indexMove" style="z-index: -2;" onclick="showDataTab()">
                        <img src="data/mypageimage/mypageim/bookmark_yellow.png" class="indexDefault index4 indexMove" style="z-index: -3;" onclick="showSettingTab()">
                    </div>
                    <img src="data/mypageimage/mypageim/close_btn.png" class="closeIndex indexDefault indexMove" onclick="closeModal()">
                    <div id="note">
                        <div class="pageTitleGroup">
                            <img src="data/mypageimage/mypageim/sticker_back.png" onclick="openModal()">
                            <div class="pageTitle" style="background-image: url('data/mypageimage/mypageim/stickerbook_titile.png');">
                                <p>스티커북</p>
                            </div>
                        </div>

                        <div id="mainSContent">
                            <div id="rightBox">
                                <div id="imgBackground">
                                    <img src="data/mypageimage/mypageim/sticker_00_00.png">
                                </div>
                                <div id="stickerTextbox">
                                    <p id="itemText">파란 공</p>
                                </div>
                            </div>
                            <div id="leftBox">
                                <div id="infoTextbox">
                                    <p id="infoText">친구의 공을 주웠어. <br> 다음에도 만나면 공놀이를 할 수 있으면 좋겠다.</p>
                                </div>
                                <div id="change" class="changeButton">
                                    <img src="data/mypageimage/mypageim/sticker_change_icon.png" width="26px" height="31px">
                                    <p class="fontSetting">변경</p>
                                </div>
                            </div>
                        </div>
                        <div id="subSContent">
                            <img id="star" src="data/mypageimage/mypageim/sticker_star_icon.png">
                            <img id="cloud" src="data/mypageimage/mypageim/sticker_cloud_icon.png">
                            <div id="subBackground">
                                <div id="line"> <!--라인 > 공, 물음표 > 흰바탕 순-->
                                    <div id="lineContent"> <!--라인 자투리 뺀 순수 콘택츠 영역 -->
                                        <div id="white-background"></div>
                                        <div class="ball-questionMark" id="mark1" onclick="selectItem(1)">
                                            <img src="data/mypageimage/mypageim/sticker_00_01.png">
                                        </div> <!--공이미지 넣을 것-->
                                        <div class="ball-questionMark" id="mark2" onclick="selectItem(2)">
                                            <img src="data/mypageimage/mypageim/question_01_icon.png">
                                        </div> <!--물음표이미지 넣을 것-->
                                        <div class="ball-questionMark" id="mark3" onclick="selectItem(3)">
                                            <img src="data/mypageimage/mypageim/question_01_icon.png">
                                        </div> <!--물음표이미지 넣을 것-->
                                        <div class="ball-questionMark" id="mark4" onclick="selectItem(4)">
                                            <img src="data/mypageimage/mypageim/question_01_icon.png">
                                        </div> <!--물음표이미지 넣을 것-->
                                        <div class="ball-questionMark" id="mark5" onclick="selectItem(5)">
                                            <img src="data/mypageimage/mypageim/question_01_icon.png">
                                        </div> <!--물음표이미지 넣을 것-->
                                        <div class="ball-questionMark" id="mark6" onclick="selectItem(6)">
                                            <img src="data/mypageimage/mypageim/question_01_icon.png">
                                        </div> <!--물음표이미지 넣을 것-->
                                        <div class="ball-questionMark" id="mark7" onclick="selectItem(7)">
                                            <img src="data/mypageimage/mypageim/question_01_icon.png">
                                        </div> <!--물음표이미지 넣을 것-->
                                        <div class="ball-questionMark" id="mark8" onclick="selectItem(8)">
                                            <img src="data/mypageimage/mypageim/question_01_icon.png">
                                        </div> <!--물음표이미지 넣을 것-->
                                        <div class="ball-questionMark" id="mark9" onclick="selectItem(9)">
                                            <img src="data/mypageimage/mypageim/question_01_icon.png">
                                        </div> <!--물음표이미지 넣을 것-->
                                        <div class="ball-questionMark" id="mark10" onclick="selectItem(10)">
                                            <img src="data/mypageimage/mypageim/question_01_icon.png">
                                        </div> <!--물음표이미지 넣을 것-->
                                        <div class="ball-questionMark" id="mark11" onclick="selectItem(11)">
                                            <img src="data/mypageimage/mypageim/question_01_icon.png">
                                        </div> <!--물음표이미지 넣을 것-->
                                        <div class="ball-questionMark" id="mark12" onclick="selectItem(12)">
                                            <img src="data/mypageimage/mypageim/question_01_icon.png">
                                        </div> <!--물음표이미지 넣을 것-->
                                    </div>
                                </div> 
                            </div>
                        </div>




                        
                    </div>
                    <img src="data/mypageimage/mypageim/pencil.png" id="pencil">

                </div>









                <!--설정창-->
                <div id="SettingTab" class="tabcontent">
                    <div class="index">
                        <img src="data/mypageimage/mypageim/bookmark_green.png" class="indexDefault index1 indexMove" onclick="openModal()">
                        <img src="data/mypageimage/mypageim/bookmark_pink.png" class="indexDefault index2 indexMove" style="z-index: -1;" onclick="showStickerTab()">
                        <img src="data/mypageimage/mypageim/bookmark_blue.png" class="indexDefault index3 indexMove" style="z-index: -2;" onclick="showDataTab()">
                        <img src="data/mypageimage/mypageim/bookmark_yellow.png" class="indexDefault index4 indexSelect" style="z-index: -3;">
                    </div>
                    <img src="data/mypageimage/mypageim/close_btn.png" class="closeIndex indexDefault indexMove" onclick="closeModal()">
                    <div id="note">
                        <div class="pageTitleGroup">
                            <img src="data/mypageimage/mypageim/system_back.png" onclick="openModal()">
                            <div class="pageTitle" style="background-image: url('data/mypageimage/mypageim/system_titile.png');">
                                <p>설정</p>
                            </div>
                        </div>

                        <div id="settingInput">
                            <div id="rightPannel" class="pannelSetting" style="margin-left: 64px;">
                                <form class="settingForm">
                                    <div class="inputBox">
                                        <label for="name" class="titleLabel required">이름</label>
                                        <input type="text" id="name" name="name" class="writeBox" required>
                                    </div>
                                    <div class="inputBox">
                                        <label for="nicname" class="titleLabel required">닉네임</label>
                                        <input type="text" id="nicname" name="nicname" class="writeBox" required>
                                    </div>
                                    <div class="inputBox">
                                        <label for="id" class="titleLabel required">아이디</label>
                                        <input type="text" id="id" name="id" class="writeBox" required>
                                    </div>
                                    <div class="inputBox">
                                        <label for="password" class="titleLabel required">비밀번호</label>
                                        <input type="password" id="password" name="password" class="writeBox" required>
                                    </div>
                                    <div class="inputBox">
                                        <label for="passwordtest" class="titleLabel required">비밀번호 확인</label>
                                        <input type="password" id="passwordtest" name="passwordtest" class="writeBox" required>
                                    </div>
                                </form>
                            </div>



                            <div id="leftPannel" class="pannelSetting" style="margin-right: 63px;">
                                <form class="settingForm">
                                    <div class="inputBox">
                                        <label for="email" class="titleLabel required">이메일</label>
                                        <input type="email" id="email" name="email" class="writeBox" required>
                                    </div>
                                    <div class="inputBox">
                                        <label for="birthdate" class="titleLabel">생년월일</label>
                                        <input type="date" id="birthdate" name="birthdate" class="writeBox">
                                    </div>
                                    <div class="inputBox">
                                        <label for="gender2" class="titleLabel required">성별</label>
                                        <div id="gender-options">
                                            <input type="radio" id="male2" name="gender2" value="male" class="settingGender">
                                            <label for="male" class="settingGenderBut">남자</label>
                                            <input type="radio" id="female2" name="gender2" value="female" class="settingGender">
                                            <label for="female" class="settingGenderBut">여자</label>
                                        </div>
                                    </div>
                                    <div class="inputBox">
                                        <label for="educator" class="titleLabel">교육자</label>
                                        <input type="text" id="educator" name="educator" class="writeBox">
                                    </div>
                                    <div class="inputBox">
                                        <label for="passwordtest" class="titleLabel">소리크기</label>
                                        <div class="slider-wrapper">  
                                            <span id="slider-value">80%</span>
                                            <!-- 볼륨 조절 슬라이더 -->
                                            <input type="range" id="volumeSlider" min="0" max="100" value="80"; oninput="updateSlider(this.value)">                         
                                        </div>
                                    </div>
                                </form>
                            </div>


                            
                        </div>

                        <div id="settingBut" class="buttonSetting">
                            <img id="SC-icon" src="data/mypageimage/mypageim/edit_icon.png" width="24em" height="25em">
                            <p class="fontSetting">수정하기</p>
                        </div>

                        

                    </div>
                    <img src="data/mypageimage/mypageim/pencil.png" id="pencil">
                </div>








                <!--데이터창-->
                <div id="DataTab" class="tabcontent">
                    <div class="index">
                        <img src="data/mypageimage/mypageim/bookmark_green.png" class="indexDefault index1 indexMove" onclick="openModal()">
                        <img src="data/mypageimage/mypageim/bookmark_pink.png" class="indexDefault index2 indexMove" style="z-index: -1;" onclick="showStickerTab()">
                        <img src="data/mypageimage/mypageim/bookmark_blue.png" class="indexDefault index3 indexSelect" style="z-index: -2;">
                        <img src="data/mypageimage/mypageim/bookmark_yellow.png" class="indexDefault index4 indexMove" style="z-index: -3;" onclick="showSettingTab()">
                    </div>
                    <img src="data/mypageimage/mypageim/close_btn.png" class="closeIndex indexDefault indexMove" onclick="closeModal()">
                    <div id="note">
                        <div class="pageTitleGroup">
                            <img src="data/mypageimage/mypageim/data_back.png" onclick="openModal()">
                            <div class="pageTitle" style="background-image: url('data/mypageimage/mypageim/data_titile.png');">
                                <p>데이터</p>
                            </div>
                        </div>

                        <div id="dataContent">
                            <img src="data/mypageimage/mypageim/active_data_btn.png" onclick="showActiveTab()">
                            <img src="data/mypageimage/mypageim/dialogue_data_btn.png" onclick="showTalkTab()">
                        </div>
                    </div>
                    <img src="data/mypageimage/mypageim/pencil.png" id="pencil">

                </div>

                <!-------------------------------------------------------------------------------------------->
                <div id="ActiveTab" class="tabcontent">
                    <div class="index">
                        <img src="data/mypageimage/mypageim/bookmark_green.png" class="indexDefault index1 indexMove" onclick="openModal()">
                        <img src="data/mypageimage/mypageim/bookmark_pink.png" class="indexDefault index2 indexMove" style="z-index: -1;" onclick="showStickerTab()">
                        <img src="data/mypageimage/mypageim/bookmark_blue.png" class="indexDefault index3 indexSelect" style="z-index: -2;">
                        <img src="data/mypageimage/mypageim/bookmark_yellow.png" class="indexDefault index4 indexMove" style="z-index: -3;" onclick="showSettingTab()">
                    </div>
                    <img src="data/mypageimage/mypageim/close_btn.png" class="closeIndex indexDefault indexMove" onclick="closeModal()">
                    <div id="note">
                        <div class="pageTitleGroup">
                            <img src="data/mypageimage/mypageim/data_back.png" onclick="showDataTab()">
                            <div class="pageTitle" style="background-image: url('data/mypageimage/mypageim/data_titile.png');">
                                <p>데이터</p>
                            </div>
                        </div>

                        <div class="act-communitDataContent">
                            <img class="act-communitTitle" src="data/mypageimage/mypageim/active_data_title.png">
                            <div class="act-communitContent">
                                <img src="data/mypageimage/mypageim/active_data_00_btn.png" onclick="showSchoolTab()">
                                <img src="data/mypageimage/mypageim/active_data_01_btn.png">
                                <img src="data/mypageimage/mypageim/active_data_02_btn.png">
                                <img src="data/mypageimage/mypageim/active_data_03_btn.png">
                            </div>
                        </div>

                        <p class="writeDate"> 가장 최근 활동한 날짜의 점수가 표시됩니다.</p>
                    </div>
                    <img src="data/mypageimage/mypageim/pencil.png" id="pencil">

                </div>

                <div id="SchoolTab" class="tabcontent">
                    <div class="index">
                        <img src="data/mypageimage/mypageim/bookmark_green.png" class="indexDefault index1 indexMove" onclick="openModal()">
                        <img src="data/mypageimage/mypageim/bookmark_pink.png" class="indexDefault index2 indexMove" style="z-index: -1;" onclick="showStickerTab()">
                        <img src="data/mypageimage/mypageim/bookmark_blue.png" class="indexDefault index3 indexSelect" style="z-index: -2;">
                        <img src="data/mypageimage/mypageim/bookmark_yellow.png" class="indexDefault index4 indexMove" style="z-index: -3;" onclick="showSettingTab()">
                    </div>
                    <img src="data/mypageimage/mypageim/close_btn.png" class="closeIndex indexDefault indexMove" onclick="closeModal()">
                    <div id="note">
                        <div class="pageTitleGroup">
                            <img src="data/mypageimage/mypageim/data_back.png" onclick="showActiveTab()">
                            <img class="subTitle" src="data/mypageimage/mypageim/active_data_theme.png">
                        </div>

                        <img class="subContent" src="data/mypageimage/mypageim/active_data_img.png">
                    </div>
                    <img src="data/mypageimage/mypageim/pencil.png" id="pencil">

                </div>







                <div id="TalkTab" class="tabcontent">
                    <div class="index">
                        <img src="data/mypageimage/mypageim/bookmark_green.png" class="indexDefault index1 indexMove" onclick="openModal()">
                        <img src="data/mypageimage/mypageim/bookmark_pink.png" class="indexDefault index2 indexMove" style="z-index: -1;" onclick="showStickerTab()">
                        <img src="data/mypageimage/mypageim/bookmark_blue.png" class="indexDefault index3 indexSelect" style="z-index: -2;">
                        <img src="data/mypageimage/mypageim/bookmark_yellow.png" class="indexDefault index4 indexMove" style="z-index: -3;" onclick="showSettingTab()">
                    </div>
                    <img src="data/mypageimage/mypageim/close_btn.png" class="closeIndex indexDefault indexMove" onclick="closeModal()">
                    <div id="note">
                        <div class="pageTitleGroup">
                            <img src="data/mypageimage/mypageim/data_back.png" onclick="showDataTab()">
                            <div class="pageTitle" style="background-image: url('data/mypageimage/mypageim/data_titile.png');">
                                <p>데이터</p>
                            </div>
                        </div>

                        <div class="act-communitDataContent">
                            <img class="act-communitTitle" src="data/mypageimage/mypageim/dialogue_data_title.png">
                            <div class="act-communitContent">
                                <img src="data/mypageimage/mypageim/dialogue_data_00_btn.png" onclick="showCommunicationTab()">
                                <img src="data/mypageimage/mypageim/dialogue_data_01_btn.png">
                                <img src="data/mypageimage/mypageim/dialogue_data_02_btn.png">
                                <img src="data/mypageimage/mypageim/dialogue_data_03_btn.png">
                            </div>
                        </div>

                        <p class="writeDate"> 가장 최근 활동한 날짜의 점수가 표시됩니다.</p>
                    </div>
                    <img src="data/mypageimage/mypageim/pencil.png" id="pencil">

                </div>



                <div id="CommunicationTab" class="tabcontent">
                    <div class="index">
                        <img src="data/mypageimage/mypageim/bookmark_green.png" class="indexDefault index1 indexMove" onclick="openModal()">
                        <img src="data/mypageimage/mypageim/bookmark_pink.png" class="indexDefault index2 indexMove" style="z-index: -1;" onclick="showStickerTab()">
                        <img src="data/mypageimage/mypageim/bookmark_blue.png" class="indexDefault index3 indexSelect" style="z-index: -2;">
                        <img src="data/mypageimage/mypageim/bookmark_yellow.png" class="indexDefault index4 indexMove" style="z-index: -3;" onclick="showSettingTab()">
                    </div>
                    <img src="data/mypageimage/mypageim/close_btn.png" class="closeIndex indexDefault indexMove" onclick="closeModal()">
                    <div id="note">
                        <div class="pageTitleGroup">
                            <img src="data/mypageimage/mypageim/data_back.png" onclick="showTalkTab()">
                            <img class="subTitle" src="data/mypageimage/mypageim/dialogue_data_theme.png">
                        </div>

                        <img class="subContent" src="data/mypageimage/mypageim/dialogue_data_img.png">
                    </div>
                    <img src="data/mypageimage/mypageim/pencil.png" id="pencil">

                </div>




            </div>
            <script>
                
                // 탭 히스토리를 관리할 배열
                var tabHistory = [];
                var modal = document.getElementById("pageModal");
                // 기본 초기화 함수
                function resetToInitialState() {
                    tabHistory = ['InitialState'];  // 기본 상태로 히스토리 초기화

                    var tabcontent = document.getElementsByClassName("tabcontent");
                    for (var i = 0; i < tabcontent.length; i++) {
                        tabcontent[i].style.display = "none";  // 모든 탭 숨기기
                    }

                    var images = document.querySelectorAll('#mypageMain *');
                    images.forEach(function(img) {
                        img.classList.remove('hidden');  // 모든 기본 이미지 표시
                    });
                }

                function openModal() {
                    var modal = document.getElementById('pageModal');
                    modal.style.display = 'flex';
                    resetToInitialState();  // 초기화 상태로 설정
                }

                function closeModal() {
                    var modal = document.getElementById('pageModal');
                    modal.style.display = 'none';
                    resetToInitialState();  // 모달을 닫을 때 초기화 상태로 설정
                }

              
            


                // 내가만들어서 수정중--------------------------------------------------------------

                
                
                function showStickerTab() {
                    updateTabHistory('StickerTab');
                    var elements = document.querySelectorAll('#mypageMain *'); //mypageMain로 바꿔야함
                    // 모든 요소 순회하면서 숨김 처리
                    elements.forEach(function(element) {
                        element.classList.add('hidden'); // 숨김 처리
                    });

                    openTab(null, 'StickerTab');
                }
                


                function showSettingTab() {
                    updateTabHistory('SettingTab');
                    var elements = document.querySelectorAll('#mypageMain *'); //mypageMain로 바꿔야함
                    // 모든 요소 순회하면서 숨김 처리
                    elements.forEach(function(element) {
                        element.classList.add('hidden'); // 숨김 처리
                    });

                    openTab(null, 'SettingTab');
                }

                const genderButtons = document.querySelectorAll('.settingGenderBut');
                // 각 라벨에 클릭 이벤트 추가
                genderButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        // 기존에 선택된 버튼 색상 초기화
                        genderButtons.forEach(btn => btn.style.backgroundColor = '');
                    
                        // 클릭된 버튼의 배경색을 변경
                        button.style.backgroundColor = '#FFDE4F';
                    });
                });


                // 슬라이더 배경을 초기화하는 함수
                function initializeSlider() {
                  const slider = document.getElementById("volumeSlider");
                  const value = slider.value;
  
                  // 슬라이더 배경을 초기 값으로 설정
                  slider.style.background = `linear-gradient(to right, #FFDE4F ${value}%, white ${value}%)`;

                  // 슬라이더 값 텍스트 업데이트
                  document.getElementById("slider-value").innerText = value + "%";
                }

                // 슬라이더 값이 변경될 때 호출되는 함수
                function updateSlider(value) {
                  document.getElementById("slider-value").innerText = value + "%";
                  const slider = document.getElementById("volumeSlider");
  
                  // 슬라이더 트랙 배경 업데이트
                  slider.style.background = `linear-gradient(to right, #FFDE4F ${value}%, white ${value}%)`;
                }

                // 페이지가 로드되었을 때 초기 슬라이더 값을 설정
                window.onload = function() {
                  initializeSlider();
                };








                function showDataTab() {
                    updateTabHistory('DataTab');
                    var elements = document.querySelectorAll('#mypageMain *'); //mypageMain로 바꿔야함
                    // 모든 요소 순회하면서 숨김 처리
                    elements.forEach(function(element) {
                        element.classList.add('hidden'); // 숨김 처리
                    });

                    openTab(null, 'DataTab');
                }

                function showActiveTab() {
                updateTabHistory('ActiveTab');
                var elements = document.querySelectorAll('#mypageMain *'); //mypageMain로 바꿔야함
                // 모든 요소 순회하면서 숨김 처리
                elements.forEach(function(element) {
                    element.classList.add('hidden'); // 숨김 처리
                });

                    openTab(null, 'ActiveTab');
                }

                function showTalkTab() {
                updateTabHistory('TalkTab');
                var elements = document.querySelectorAll('#mypageMain *'); //mypageMain로 바꿔야함
                // 모든 요소 순회하면서 숨김 처리
                elements.forEach(function(element) {
                    element.classList.add('hidden'); // 숨김 처리
                });

                    openTab(null, 'TalkTab');
                }

                function showSchoolTab() {
                updateTabHistory('SchoolTab');
                var elements = document.querySelectorAll('#mypageMain *'); //mypageMain로 바꿔야함
                // 모든 요소 순회하면서 숨김 처리
                elements.forEach(function(element) {
                    element.classList.add('hidden'); // 숨김 처리
                });

                    openTab(null, 'SchoolTab');
                }

                function showCommunicationTab() {
                updateTabHistory('CommunicationTab');
                var elements = document.querySelectorAll('#mypageMain *'); //mypageMain로 바꿔야함
                // 모든 요소 순회하면서 숨김 처리
                elements.forEach(function(element) {
                    element.classList.add('hidden'); // 숨김 처리
                });

                    openTab(null, 'CommunicationTab');
                }





                // 스티커북 js

                // 물음표 클릭 시 호출되는 함수
                function selectItem(index) {
                  // 이미지와 텍스트를 저장하는 객체
                  const items = {
                    1: {
                      imgSrc: "data/mypageimage/mypageim/sticker_00_00.png",
                      itemText: "파란 공",
                      infoText: "친구의 공을 주웠어.<br>다음에도 만나면 공놀이를 할 수 있으면 좋겠다."
                    },
                    2: {
                      imgSrc: "data/mypageimage/mypageim/question_00_icon.png",
                      itemText: "???",
                      infoText: "다른 장소로 이동해볼까?"
                    },
                    3: {
                      imgSrc: "data/mypageimage/mypageim/question_00_icon.png",
                      itemText: "???",
                      infoText: "도서관에서 어린 친구가 도움이 필요한 것 같아."
                    },
                    4: {
                      imgSrc: "data/mypageimage/mypageim/question_00_icon.png",
                      itemText: "???",
                      infoText: "마을회관에서 누군가 <br>나에게 자랑하고 싶은게 <br>있나봐."
                    },
                  };
              
                  // 클릭한 아이템에 맞는 데이터를 가져옴
                  const selectedItem = items[index];

                  // imgBackground 안의 이미지를 변경
                  const imgElement = document.querySelector("#imgBackground img");
                  imgElement.src = selectedItem.imgSrc;

                  // itemText의 텍스트를 변경
                  document.getElementById("itemText").innerText = selectedItem.itemText;

                  // infoText의 텍스트를 변경
                  document.getElementById("infoText").innerHTML = selectedItem.infoText;




                  // 볼륨 js
                  // 흰색배경창 이동 js
                  // 각 칸의 위치에 맞춰 흰색 배경의 위치를 계산
                  const whiteBackground = document.getElementById('white-background');
  
                  // 각 칸의 위치 계산
                  const targetPosition = 85 * (index - 1); // 각 칸의 너비가 85px이므로 칸 수에 따라 이동

                  // 흰색 배경 이동
                  whiteBackground.style.left = `${targetPosition}px`;
                }



                //-------------------------------------------------------------------------------------



                function updateTabHistory(currentTab) {
                    if (tabHistory[tabHistory.length - 1] !== currentTab) {
                        tabHistory.push(currentTab);
                    }
                }

                // Esc 키로 이전 탭으로 돌아가는 로직
                document.addEventListener('keydown', function(event) {
                    if (event.key === 'Escape') {
                        if (tabHistory.length > 1) {
                            var currentTab = tabHistory.pop();
                            var previousTab = tabHistory[tabHistory.length - 1];
                            openTab(null, previousTab);
                        } else {
                            resetToInitialState();  // 초기 상태로 돌아가기
                        }
                    }
                });

                // Function to open a specific tab
                // ---------------------------------------------------------------------------
                function openTab(evt, tabName) {
                    var tabcontent = document.getElementsByClassName("tabcontent");
                    for (var i = 0; i < tabcontent.length; i++) {
                        tabcontent[i].style.display = "none";
                    }

                    document.getElementById(tabName).style.display = "flex";
                    if (evt) {
                        evt.currentTarget.className += " active";
                    }
                }
                // ---------------------------------------------------------------------------------




                document.addEventListener("keydown", function(event) {
                    if (event.key === "B" || event.key === "b") {
                        if (modal.style.display === "none") {
                            openModal();
                        } else {
                            closeModal();
                        }
                    }
                });
                document.getElementById("logout").addEventListener("click", function() {
      location.reload(); // 페이지를 새로고침
       });
            </script>
            <script src="mypage.js"></script>
            <script type="module" src="login.js"></script>
</body>
</html>
